<template>
  <div class="relative overflow-hidden">
    <section class="mx-auto flex max-w-7xl flex-col gap-10 px-4 pb-16 pt-4 md:pt-0">
      <div class="glass-card relative overflow-hidden p-8 md:p-12">
        <div class="pointer-events-none absolute inset-0 bg-[radial-gradient(circle_at_10%_20%,rgba(251,191,36,0.18),transparent_35%),radial-gradient(circle_at_80%_0%,rgba(94,234,212,0.18),transparent_30%)]"></div>
        <div class="relative grid gap-10 md:grid-cols-2 md:items-center">
          <div class="space-y-6">
            <div class="inline-flex items-center space-x-2 rounded-full border border-amber-300/40 bg-amber-300/10 px-4 py-2 text-xs font-semibold uppercase tracking-[0.35em] text-amber-100">
              Premium Rental Experience
            </div>
            <div class="space-y-4">
              <h1 class="text-4xl font-extrabold leading-tight text-white md:text-5xl">‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏ä‡πà‡∏≤‡∏¢‡∏∑‡∏°‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå‡∏£‡∏∞‡∏î‡∏±‡∏ö Luxury</h1>
              <p class="text-lg text-slate-200">
                ‡πÄ‡∏ä‡πà‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡πÅ‡∏ö‡∏ö‡πÄ‡∏≠‡πá‡∏ô‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÑ‡∏û‡∏£‡∏™‡πå ‡∏î‡πâ‡∏ß‡∏¢‡∏î‡∏µ‡πÑ‡∏ã‡∏ô‡πå‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡∏´‡∏£‡∏π‡∏´‡∏£‡∏≤ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏á‡πà‡∏≤‡∏¢
                ‡πÅ‡∏•‡∏∞‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢
              </p>
            </div>
            <div class="flex flex-wrap gap-3">
              <router-link to="/items" class="primary-btn">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÄ‡∏ä‡πà‡∏≤‡πÄ‡∏•‡∏¢</router-link>
              <router-link to="/dashboard" class="ghost-btn">‡∏î‡∏π‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</router-link>
            </div>
            <div class="flex flex-wrap gap-4 text-sm text-slate-300">
              <div class="flex items-center space-x-2">
                <span class="h-2 w-2 rounded-full bg-emerald-400"></span>
                <span>‡∏Å‡∏≤‡∏£‡∏±‡∏ô‡∏ï‡∏µ‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</span>
              </div>
              <div class="flex items-center space-x-2">
                <span class="h-2 w-2 rounded-full bg-amber-300"></span>
                <span>‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢</span>
              </div>
              <div class="flex items-center space-x-2">
                <span class="h-2 w-2 rounded-full bg-sky-300"></span>
                <span>‡∏ó‡∏µ‡∏° Concierge ‡∏î‡∏π‡πÅ‡∏• 24/7</span>
              </div>
            </div>
          </div>
          <div class="glass-card relative overflow-hidden rounded-3xl border-white/10 bg-gradient-to-br from-slate-900 to-slate-800 p-6 shadow-2xl">
            <div class="pointer-events-none absolute inset-0 bg-[radial-gradient(circle_at_30%_20%,rgba(255,255,255,0.15),transparent_30%),radial-gradient(circle_at_80%_0%,rgba(251,191,36,0.15),transparent_30%)]"></div>
            <div class="relative space-y-4">
              <div class="flex items-center justify-between">
                <p class="text-sm uppercase tracking-[0.25em] text-amber-200">Realtime Overview</p>
                <span class="pill border-emerald-300/50 bg-emerald-300/10 text-emerald-200">Live</span>
              </div>
              <div class="grid gap-4 md:grid-cols-2">
                <div class="glass-card border-white/5 bg-white/5 p-4">
                  <p class="text-xs uppercase tracking-[0.2em] text-slate-300">Active Rentals</p>
                  <p class="mt-2 text-3xl font-bold text-white">124</p>
                  <p class="text-xs text-emerald-300">+12% ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</p>
                </div>
                <div class="glass-card border-white/5 bg-white/5 p-4">
                  <p class="text-xs uppercase tracking-[0.2em] text-slate-300">Overdue</p>
                  <p class="mt-2 text-3xl font-bold text-white">3</p>
                  <p class="text-xs text-amber-300">‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡πÉ‡∏Å‡∏•‡πâ‡∏ä‡∏¥‡∏î</p>
                </div>
              </div>
              <div class="glass-card border-white/5 bg-white/5 p-4">
                <div class="flex items-center justify-between">
                  <p class="text-xs uppercase tracking-[0.2em] text-slate-300">Next Return</p>
                  <span class="pill border-amber-300/50 bg-amber-300/10 text-amber-100">Today</span>
                </div>
                <p class="mt-3 text-lg font-semibold text-white">Camera Kit Pro X</p>
                <p class="text-sm text-slate-300">‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡∏∑‡∏ô 18:30 ‡∏ô.</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <section class="space-y-6">
        <div class="flex flex-col gap-2 text-center">
          <h2 class="section-title">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h2>
          <p class="section-subtitle">‡∏Ñ‡∏±‡∏î‡∏™‡∏£‡∏£‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà‡∏ï‡∏≠‡∏ö‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ó‡∏∏‡∏Å‡∏™‡πÑ‡∏ï‡∏•‡πå</p>
        </div>
        <div class="lux-grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-4" v-if="categories.length">
          <div
            v-for="category in categories"
            :key="category.id"
            class="glass-card group cursor-pointer p-5 transition hover:-translate-y-1 hover:border-amber-200/40"
            @click="gotoCategory(category.id)"
          >
            <div class="flex items-center justify-between">
              <div class="text-3xl">{{ category.icon || 'üì¶' }}</div>
              <svg class="h-5 w-5 text-amber-200 transition group-hover:translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.6" d="M9 5l7 7-7 7" />
              </svg>
            </div>
            <h3 class="mt-4 text-lg font-semibold text-white">{{ category.name }}</h3>
            <p class="text-sm text-slate-300">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏≠‡πÄ‡∏ó‡πá‡∏°‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πà‡πÉ‡∏ô‡∏´‡∏°‡∏ß‡∏î‡∏ô‡∏µ‡πâ</p>
          </div>
        </div>
      </section>

      <section class="space-y-6">
        <div class="flex flex-col gap-2 text-center">
          <h2 class="section-title">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</h2>
          <p class="section-subtitle">‡πÑ‡∏≠‡πÄ‡∏ó‡πá‡∏°‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡∏¥‡∏¢‡∏°‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ô‡∏µ‡πâ</p>
        </div>
        <div class="lux-grid grid-cols-1 md:grid-cols-3 xl:grid-cols-4" v-if="featuredItems.length">
          <div
            v-for="item in featuredItems"
            :key="item.id"
            class="glass-card overflow-hidden transition hover:-translate-y-1 hover:border-amber-200/50"
          >
            <div class="relative h-48 overflow-hidden">
              <img :src="item.media?.[0]?.url || 'https://via.placeholder.com/300'" :alt="item.name" class="h-full w-full object-cover" />
              <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-black/0" />
              <div class="absolute left-4 top-4 pill border-amber-300/50 bg-amber-300/10 text-amber-100">{{ item.category?.name || '‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥' }}</div>
            </div>
            <div class="space-y-3 p-5">
              <div class="flex items-center justify-between">
                <h3 class="text-lg font-semibold text-white">{{ item.name }}</h3>
                <span class="text-xs text-slate-300">‚≠ê {{ item.averageRating?.toFixed(1) || 'N/A' }}</span>
              </div>
              <p class="text-sm text-slate-300 line-clamp-2">{{ item.description }}</p>
              <div class="flex items-center justify-between">
                <span class="text-xl font-bold text-amber-200">{{ item.pricePerDay }} ‡∏ø/‡∏ß‡∏±‡∏ô</span>
                <router-link :to="`/items/${item.id}`" class="primary-btn px-4 py-2 text-xs">‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</router-link>
              </div>
            </div>
          </div>
        </div>
      </section>
    </section>
  </div>
</template>

<script setup>
import { ref, onMounted } from 'vue'
import { useRouter } from 'vue-router'
import { itemsAPI } from '@/services/api'

const router = useRouter()
const categories = ref([])
const featuredItems = ref([])

onMounted(async () => {
  try {
    const [categoriesRes, itemsRes] = await Promise.all([
      itemsAPI.getCategories(),
      itemsAPI.getAll({ limit: 8 }),
    ])
    categories.value = categoriesRes.data
    featuredItems.value = itemsRes.data.items
  } catch (error) {
    console.error('Error loading data:', error)
  }
})

const gotoCategory = (categoryId) => {
  router.push({ path: '/items', query: { categoryId } })
}
</script>
